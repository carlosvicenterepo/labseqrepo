package com.cv;

import com.cv.api.LabseqApi;
import com.cv.service.LabseqService;
import io.quarkus.test.common.http.TestHTTPEndpoint;
import io.quarkus.test.junit.QuarkusTest;
import jakarta.inject.Inject;
import lombok.Getter;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.ValueSource;

import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.containsString;
import static org.hamcrest.Matchers.lessThan;

/**
 * The LabseqApiTest.
 *
 * @author carlosvicente
 * @version 1.0.0
 * @since 01/10/2023
 */
@Getter
@QuarkusTest
@TestHTTPEndpoint(LabseqApi.class)
public class LabseqApiTest {

    @Inject
    LabseqService service;

    @ParameterizedTest
    @ValueSource(ints = { 10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000, 100000 })
    void testTimeLimit(final int n) {
        given()
                .pathParam("n", n)
                .when()
                .get("/{n}")
                .then()
                .statusCode(200)
                .time(lessThan(10000L));
    }

    @ParameterizedTest
    @ValueSource(ints = { 300000 })
    void testLabWithoutCache(final int n) {
        given()
                .pathParam("n", n)
                .when()
                .get("/{n}")
                .then()
                .statusCode(200)
                .body(containsString(
                        "\"value\":\"9706279821015689263948548989335120023527999530604184086327707889143184229949505945834957728830236031038631915039663372129498985357549643823467316144326158473562640171416371930813171683916255390084414291024425564793462414168865389011425467785018657051439946087946385058844262432784097868520863370602342811101955047615356198161385156058471679151411718601917675506634857073106945102597987763563221058620917374533497981698470406699507316590528044263495145901473963796373816658470378315461087305859368321088078003647956703891847471443079919237926915886468645166594097990597284766051620181495214857840840261228202666751106843556889734090786094888774205730496893203102170502780586969249402316557968034115892975649586118754014919094087687571098649546120487113210135677276131084741749664638017431545806720012663882357386371598807178745583217820195185589753965291383751585139404650055572953844910152641739699454537053764221140989107033568083047511883612489214542812636098781275097026543370210742496801252863348403848222103123491829798706830418488382408539364951319715031140307168079181205761926334812202005493047346342214779092811647691195743964040711057427812931477546870841255671174595384209328946058794742045809218781581342045624698047013988431426617195258075839261505476380339708904073376102945454160380622895110493739756402111553611197497295303982109370701346038272369558818567413848066259980262531503764719634799719801856434218291057022232698505130895661907810507266338092671356494293763653122780597958672665604903108859316385657117503465272747749483516340280560816831547262055182230775170882917332262443319777471424585232136254379318036560818994445741078066847205989486328535558169254919029694806155958610366129145387148823601153824305352332316642497860865707878913710057579498270965057742939596017556714119327938357834216127578791518245433420298296733125573180948622798367498460844044472872374254353990019338444035856602216894695546777908749361492278043449271507413704294938489681531974954110110237649022361018600245070593766792090502332073473752953777183565613932390933891963328283838626088480829953147347615206036259497422084921051915246498765547688758580328715674566751459814598071110963332607052894614403973066338700465677615258485962357275178129746333282008405441929891004424188271877733950778861772063083227295994740126615248027043967947407848676575915083544259773854324891668938009171604299279480214957450275486357271805083181045210509547760159906786244082200600213458710414417453422300872494934050925554219741038923714662713948287018236982277584300100424328676685458864966094379754770381294358448366385064688989306733012083044267126811283354802163391043716997773780365954089020206329023957225846644529109740424142356483665983433914426633851059164163175465065821928944585155929581433270983960545685139543232930321977294870698091720949416243347723468201164927187540955695582349240168493027375305866458504790232161483825130627600985365764482451603299688892840109245004989216492194338563976554075925229720237214664950193134968653812638265245786684886812793596614864433527270102044665375815586269937864315184484490411421327964940946538027642666457317236108494806697262471429624505811660541896614534576368076032659682164464301198978896841530482340206079457507461014684715523244075172751837884461028006103156391073254036646022311046786603115112958256556927746848016179460629250463658562264777112412038588002487343386187575979206223016183485894675167836661679677358214063016408414954924975046096985672144418637125484269174362641885586682641138926554077308395768887108532868747898405538254327221484674692514555062221526171725439720330836642170854621789149484213590481244884129301566575783234595594249098829955886597980460758998870541306409586552851125225876227812928868467872428152722714093476514059683446901835236097613404653649242253230987655764618031751460160889986086036199272682183180912871859366126311239096045701809893943059583968038208623159532712778492971582862749209053154977032565666700731849851837785112944397634574627733019300113213764974777666295467971308479021573123373994145505071460850015268837298155049277998998966414101464491130618577367728260370506962284590175045299810715194389519584418913998048380789070688949601716935309428763306172415122256937996127836085326597959672909123789832400750114690275076858863244839127582718148554483970522433253104899604083077066591642570516579307583520829381645383835569210884008704917858271474191307963111435259303073930439057608404313693163017368347093042414007216409535749923412137501067737647408957638970110522028097364790074812418821298015769928304651810721999241599051699459658831108966517150928452944155402959668584663852829710789821420473276384946769510002634388355593767927162082436986718124626372679291085214324544497619148338353163012169424380089289298686742893043366393015835747333243800630333301793187099802578227134942044505519336948940067336690595691988670373039405459209065800370715426437376066772202560942311150020467690079546803241061728267355204660331283662548236562987196652117652849152705447893188577932855070511159304634166040381211242498715992045856876952451834504371146513127771514134655713978251864395430366559245301560951428412384685235172249545727049615060358017479564804751428526280622184232807408957091713410383396316974385764390883048492859279048253895346654219220750455311148617970871531819486121305074617132112385059631370304645664101660093990914263889496624159842702068350850465883790868312741359388915740866364700630453435080440294708052770331542280727020168268777366545623025034680274445339661136925051451206533166698646204809787332646569539030301964148782411961855960207618648888715251647792937045111176678389550846697999003128597050945895874842601709174638735152896383191800958655298668145716313551891955408261535378727464496776509889854958286066867819494329919149320399188581154974515045664166896704674200688888080925026092591130833821835118108149952363891395975793003853630947693155317218564279121468312872999672061465556779767962306756796119114716566407303625811282218672931593562299583614379874988234760596845956240493590694966993217879424601876905050335910598318535478616483710361575807710751472213087699966791054855410712081452931986567118331861567502095346230763326967840134066690217694354308511517763388800758870759103277247930891585058609199920254286123926831410507030186078877779104950647095236705878479165435472881488599456867658499875319226461784992838160597402052361040019691350515097160616516054708218059369785680256685524571056737733822647741049975415862862443722662471732496847241312514728813512951101271544157777617410573096104164979496779457960865094648798332752404346071754377858676374204556226593044457187954197649215458097898194764532054776040343190842678602135645490925796759262359276772025723824284817316910879699171019387150036865481573268604181498294698446575579020552835569171351013656465330888929338641399658460509281664306452133901056931367572757755509825929402346000717027004633987599484047426756181418756950618916119063304380971260456915421562007108805789035379144056103700684964783244043488675233348273861132015163496898996971346898588726267255856563389878448958109103795076094456693621000187811815648379489376814396302737200545184437797960443844848468980404364361034582104287144852691716626503135345697989946819715903536684785784272324950681970645849314745599463150525909925795860833567072430674144726201380235338915367414230752279694899249772718716925412569939053692251092263171916806512360554708547345919685261661511647165945845936195894631774932709343141360381641351431890804337011350829838759253416197590714418097989342078853945598482350437243845941909859371526684088645870073032628771131729157822470505332002563222080225636661704932387757364603464075311904735536549247015126086430197448090988672527214450860931288155230904594191939925088693201569924772405189092476942481161438227974487910617685909554283992395586101125626299422880694241351305610308526184961651653089689900859415081320601124179862674661312388028214146436896843374777192687435367243512854080379191877802996556634973476271401513813652178019137884838261274885076466363953522536645166597017040605463214463832715588143461765816759406151859915527308230728390770311198904676658615207352424894544097013458730758433234720960988930325072164612986692560921002106216730641290042903590863558397002375577829242882704160875767296658874982134702262825297751776842295728814414672363932336270177973151953721165179052518010801032357771728180539964987553482340945099784351933671286295626886989669692742235055235745091438590811368081761729712561049279754475868895109258933005436249360539957553999485924308601044701912449479385051153585420354841257016192693288125473380527208216361839551987241205341627957655118445169467904180538023456247744062745790860416160290243231759940629386306736821668418070585030439490290436186520066245218748991217013531537804821796848825755581560553513001874518834025085755595976502485511562749757117245973231301802457838451329667388392284268508240385756650260979171859054296663034106164135095502853702364337927721796402528436478216022602195736841843058595841103684253471512150900052180226492757605901407806499036015163751677710773314828714859909762206439828954662221467837820146656027528831751148568807459847266177163713413465108107475323141082698785610318432372669991488670430226047387727806863025686500203456336952856444789590136253133237460473807098865831261491601110135057982154026367915873590261647737053411865545198612881014581152267935118375544925930871825562466223819220967692756077927443841164615774955203450291471157991911747033000212536494528778491924803483151955965923494407033135843661038820179801676409830921977129267979347885873703534211653239852820555595592662665489903668696840718531358780259843693102874338414419862602902318003492112237109194548505318769717451963817728925510896384123848406483627486471899820530159281688063791880723629344696177877231447342056634713950305204247730210383564795437891457524191535919026899655248913674610202640722433329869012446583819315129228188958616981422205207594601492465296401933519096782677117540249779716158048863940076923420557187292289498144007589246720584756225433844712733353197421930463977637612770323953911070105849434801515190403518575720065949154060217406652609197459556350471126945932673056192292584368457078410747745369484626612688426451203222195880076847174885913356544582839879890064531073469234745843391045366821675604285922919122065725553336028695585133434800671385935691790740526061306170497862246327318532537339344104129211747762688645708098914268689527158119784852408787241254937206694218424018286866046437000264188014023696853629919137573885114216069446232820117808320550473963310720097867868309202964497465626276657298517197277312590244814536620045466553593408334993357419117359030180719038514292145474612874127562922776672340908566428497696812784541012657874520013238083353669458828462588197371926680229961837409287906867048592266144797217098158648912543491275048922436335002067063654116441805870345177574186356115858845764495441090529532684621525569421569331858561019225232974571435353610116945816023783330310733444302848172606206844118928056174890079966837046674763757405828693934892152967368589621574780147403681133492324784525442249293777897802368513737883039674875741788588138383133771838732813457975638552252079182743821388793700933790278113698454819892213047895097441542781406613264878503316524954952104279651445479826389844620508247011091817001164372595492719096885576647878026872408153049126668145197268811514611816079507247218164205830954859728690072382678241405741511128825045847842666184971975827073344889238499059232818580609792211310419288304658982201723379246278680254871226053499345655981353836219246063567266985353692018870271007904801913395031182035919785673811853794356596070071793379402365448295734463969427484747422618021629782155520609209493988602370141822846666834752185589696200249359750755769000974120403770383074621150894045150520575906952392254226627994781664889938336685783014370570709130592325062180593256519150388469789251944784333386919984347798256358547314198325213716341095736596066515370944193504096984765765459470687372390114255448382040726684015661747642361457413770050382139409871468494905395923269369755513321597338595092332546878851220724417953539671319349005520798014010030681546670972048383910530578424338515363405456093068924942508938522324009396289693435986801676869492884305388007421620811114025789281809940223838238768940480509438578158408839405524763255376552332398509422710747409198658126968149370778351616069896843591681758211840324700208535812381906855386456049992116556532998087167279368088064212736904941910441014421707322831284903412253021751455538337534785089866694844315051935601137397335931858998621584539583477353214676208708707897492107708314650882931953748924163575662687961079205322965322099113641905281062050070056761759736188968210815986961262151991418228084522949344154634483728571214747064014118995683507518907245882234854046769155866088856495665967119359036929593807788132201338623801104477087826479497486504239303659518121982194604532945939180641534946841210669023986588781711667022109956329387339813396490566419247844045664988525747168173719967726540652556908910100649131146399589190374188611138294941339422157606468830688308188654369659695143002383384967062279016697244001302609478112561518733266037894218055985366042854948404842166647184039870262777888768025240296408603265407224059835590957070241110781405516723783408641631399076055523462289926686372828266597886042309391684717562420650358699798453013653154617143319926076670064779239363768349079642977421815946144819115697621483312743679207430553346097592419348635748296424297628386538940788759735503366271049608576513207953664280897937909002775198094729497228343678745629082416130944554875631655807250121306247315918670947914736499106476315952854675668208121752017304380875932317610610946857797924800595512856553576143779293164924276829551552260138137058509092857611695770143265002031279275001258797778748130344111443512531900578524361301115952208590144133983094780779989343366811075116732549103099276305628931754327271032340040937913478510235761625699594832856162593880422436102748508538341870087083429048031249377737440371606179430073013982697556338737372940444049239167498690997400471984251935725282499294251214082958264614515045379674173527127482303395180033015678045728877271530710372011155482705768899676514145497241483581101906374485092279273600178205335226783618049834503574992898627886913011894209631250460463700472965982995125113776829684850623415747292631013651245288011623792834898288236257333967419230924411933060693907468352884275546691176738077940083145704720642218157366373262355726879840035693839591310891914739282257552083452767034521932751065879700812097352099031507703882802517176863475460501194506017994754111681095161677567628717743504144479025205753570270234379336061655569537668099524951966565579414087174844581222205671160178530627467025628077274376323780877366122752173964286839819123923402139765253819006976599836291741912837728218147655563244644271812417159242903818066795958722760741558162078597841602945725359050256118486034370139349207692901924074940235130095744044010875741827427756638341251891190969130287354443866980223928016609897332512394934601785844467386313165081421125029984540020671107713056391588623360010127748674769506362383993870643149497179458287043482390644485055713089638735121425956527502841269326531945354184194095342253295760013794943687763792252204635682355176981246237938701007767688139975941916714787891928164979341973765288907277172946573207702067342364245745699598218098889647333995141947536671107452821438246966601409365165213969790642292425396935664982467077522402121562289041928565213271276266492763652689336652787657560717922944593270062957716157197221675625253530373379769130261207687902595650666421558588262636855121596752766967781030406649914821349187835182445318068515136879404657713535931745649690747254789498992035330588589973567541415770971580223117648411683153159750208534322738291803664666775529036217940659604576970067479298000666194084422843286396416950688954037138906040332929845440060942168183682932390188669768791568039916755434532648284713512608820018065507796278624935681440162982076503436395654792297645740080621858869745338243940276320556790478541305726650398164835746546190294280590835022706411764055290221546567482696101897043208124355905181068115009893095094314466501232090405559819278346948944574650249280283755666432821310711556217146929027468101583902669691623837250314941404273381289718591068700526651183385100526265411255563570781555706949590245175537430362808444881280352611154299961938070207636114793009435183379696973661615764566475286576833996921988962041371692319395123366870372292087319747273930331067138903451919162168631557507403795997875170138886278524807266817980095179811454713309911388826186874412910933008655936131980317417801271723974144681192081836480616125858195437451797541438173889528122816848340439023217600066995881000447101102539508046661760201935206646485302395383971479253006202236985333451639817540059949349267443145473869010586991024786095390881926185912813074023800299493101388917724925585059443297527477952272079585851794772995416436536673757241647848036828520023059345307764650669413646027622715243178591857709072397668300590006957144910704644897432919306599267580995586689735713222074197150252059427419919497211174447967481565740951766439674283687928096972647085090102665736161546377681453195900294029263151716402816503880129032894997828646188174247778425050897136338773567041028441061733547181966267411475883733818211551128873279946161450797511330421762479617481571009529535755842515111223192543336146376899281871417878322191068957502537934491213568299326942072010787130107400565695209290286515731237812788864348729364498909668103646802583098423464712399680293571717040588025354455169343035283687884143739504142905671019625126199471026151030870279976541654046335270826088315647305164466827818985711691943930768915787869407996957502167558346828608824934168114301180593184418829837153484800879396019947805497378095364745947897583444753033192840927689185097562416590736678619798458863422708320046708895972171665447881291930220396634139874499062609553417282088783628984642164501370108316467015088310591710778100631630985165330429908954053265098303557927139870101643941928118937620858866056416142235315744497000526649643988990837661025570779384873021762220715191936860546359330808868485790866781635150235217769861786980756944959698078265974368798541138723855775723483367250650595061103041238313132946901093055252607456724273536629300277596151739190335814782816870733229722275834914829881384474471011532457756362956859247599958411427734298470195403455591177460245834168638945602191761559880432192797669074161259701346344019233759482952147490372080374304994636772147047009318425746453613488344683425389849132576247154518382853990998389622986749259960330060777232633178308286227946322799189305543022694276371011638553505346786110204613351767855105606215630812855633267395425765006415521648204387538085658421348558179389064583360984815596530300118535819337133210434353217444390073730590447534794864176064990755397400679840342317602490222760091783208652549428251540518011553415865356067227335808367406585806415683395449199019500839208654897761480686983942773165789345797225723378123168745835872047156534168564579342073592452197692026419714210666412215805978436722088781744477068101052983032649809564452084796803019573899237311641005374819276641194456579457992625912385328093719733574343584067908456707839142235070230537620017840200239789373034026528369163904435453135708995339991198150908783522723130441465584828256645865151420009836038817316799911320257944076405031800953667459024857617167165318610787281781552355018872735555769572382473294345514298077687116470571899538132530909847890363316662775211481218112156853285190077504457253208879185092581301663583552905383293706398129721599844869209616030612164211575128836125792899502847614950601603952426025419240585060937296583642970119305711509726760017923673356858365194600968513453292822439461362720409056132754011482813030059030293433176567765279348224370829296243082531781895403395986020763309915696084934528461360533949158931059979169689473199629600179272510070606083329325212842247306564594005272132128718064063856181909591877365883959378774102860756601288195509638682593098092647564319871717127171108101606453190069724821604220955952925488492275806978488695167758904726020217673039949431002851664461766023863780440022889718274516734587801810470145408791067750899727476938323644906962679483370830368080515658009351842131275305318821132891104547056455804259090826530780176639980984917331109018920866945906992523418592328980210648372914590459943372024433514710019745603006453317503588540450745490518253887536460289691481240323699704431756734960456243327018433888596066054255571153838093049170264226680087201362700250545196818290393017568045020163935345632547989026324718703463824988869306145594445472218418075695576681543539587143481766288542848803401015080340459420200570538226288806017426529925317995472922426220185397720684811365982316345854970450426085373808776255758798661778423784652675408954571571429588762572699792198997218257360891944873109350209744376165673518586241576724876305631705499073421812154470650778765323746250610458192100439445342472922734154440572307718517248752017399320261954267503102703764217386297055331720959328910079933407207781453245683742605798912309290013870687148003570994381483146299376964372970275495520977136849447348935224416501945206860792832499037144217908309589454566282948829251097826551461579012282857179064542965790660846592383697973150736247931979710038673398494401430857611505530484286285579506023548888099937638863071288188205547014494893586236079454623735577477269676185259595385673394694845967479775863470166943130016293062835414238972795475822051573062019448830874050981195571224034093781650092843515397570706253467301619829117297564208647665097392188206729460277000796357027916685518543155535380350899709708320426053012914881489308112075511497990200892826897283812941304359992193452066359174609655999130497329594721270307863708848260320299144619187174156954926125414481598377835869663086507393260304438770995973439577024162012532902740094723306412962535837180097572555734537702717078764440351073707205489725345581304778690576882863747571656815989972669620256049645172389896781901491352916504608488609040510469443398134173045543432738940802182833599958905367074119548426946715594590498592381672090885672691256874214437849575549590755223652145862496212697815778924713032218987332214207340349259597777080884430664366363732562390569827400400605947935499779215468299747350380971692523864006307105778171816833037184936851867294376497470298191725002213164865162880207187100281859465380721123890471486107357883287532571252737851495417087803030291717137105522531008959752134370786247623680525947148720748699282261746730584805683833801041708130701962352692705664961416879244291906796209315421209018042157135925182684970297807055731016158258639815472880838560158612827557096136220419198506625219674856062382398102854426604249221618543353988182467899189790451722718802744468467755266925192368761661526855446471148626845086128049810176709640559200475488229302987691717259169613834629631909502032857686943793305003901373885329962637956609452358447053779727020225634384744496043995660399766927869883806318259151257515168977998186369454278095384348075004052007169467037893324058997648592957802656325212137411820831145529723739901393946350479522860224132430051820868614753362898905650677675643991541411551844179209634510821674512982360767189166579593305111884283371650804345796338656857684214922008128936675525426382211539351914313629920973163774955370085883736318858539473658592199666071042983748635420304993743222834229086812981696718324343356533456189100004709974930247809917904303298813738728871645868838092878950778954705875710713732438111804201242816904125938624078569408018099830188968508135426629826476456723195719497698534072745731278855870649474711994064316945935886910945738831361069879691201827664056047903568321445297477833798925365870035560744333054125814998758039896830808608514811627788302543460026066377471902924867637536055557650514071467620433089018134475873382790220885970488713181730977519249111662659278000057666783283718235143230811755119462369137231234061881572186253888454875155503737133040947848461988254664197778573018551465702447406410611369716543312459345237817530108868828836639658562558874881066121811721641413487079303384536180938693711813903639537669458977222364368052482063656731994869121309991590564663848581170431252561471472367286179911792286066583600408239449900473645984483293201632136199078048398359122581740438518406467744130141445663914310229733463663004643064538409288784598551738242338486022852399281142348158397494362106850497845809878797441644866614135296285679747697615490394650879861150679036274096958788066005425016751057873430283002750869734793913555522430567038259001639363704121492045754378371190006870949916079154986401552157336298868945901243497436843225038532331583783226142214371983786411913042249610922663682622667411991253047199692028042144803512855900880469357859710379737932226606138951077834225663972005812031531549307694924989200791434993046826627337242800124787805760732404649084462078370039158488335926508733968486022705802161594342874280865848921040069898046109132458607510348645744575957648026939580441821273772798841792252624447428141931367920637996735975458845847940047068241343347036996407734371776891589290275278137532862353623409570100759221000066102461458910234285185845595465407777720649050238220056937931505242231112289383444033717792470914057067542825023868485553261995469991831724546568252825073190443780280612458432908217054656\""));
    }
}
